name: flutter_app
description: A Flutter application following Clean Architecture principles
publish_to: 'none'
version: 1.0.0+1

environment:
  sdk: '>=3.9.0 <4.0.0'

dependencies:
  flutter:
    sdk: flutter
  flutter_localizations:
    sdk: flutter

  # State Management
  flutter_bloc: ^9.1.1
  bloc_event_transformers: ^2.0.0

  # Dependency Injection
  get_it: ^9.2.0
  injectable: ^2.7.1+2

  # Code Generation
  freezed_annotation: ^2.4.4
  json_annotation: ^4.9.0
  auto_route: ^7.9.2

  # Networking
  dio: ^5.9.0
  retrofit: ^4.9.1

  # Local Storage
  shared_preferences: ^2.5.4

  # Network Connectivity
  connectivity_plus: ^7.0.0

  # Permissions
  permission_handler: ^11.3.1

dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^6.0.0

  # Code Generation
  build_runner: ^2.4.13
  freezed: ^2.5.2
  json_serializable: ^6.8.0
  injectable_generator: ^2.6.2
  auto_route_generator: ^7.3.2
  retrofit_generator: ^8.2.1
  melos: ^7.3.0

flutter:
  uses-material-design: true
  generate: true

  # assets:
  #   - assets/icon/
  #   - assets/image/
  #   - assets/animation/
  #   - assets/image/bank/

  # fonts:
  #   - family: Pretendard
  #     fonts:
  #       - asset: assets/fonts/Pretendard-Regular.otf
  #       - asset: assets/fonts/Pretendard-Bold.otf
  #         weight: 700

flutter_gen:
  line_length: 250
  output: lib/assets/

  assets:
    outputs:
      package_parameter_enabled: false
      class_name: AppAsset
  integrations:
    flutter_svg: true
    lottie: true

melos:
  sdkPath: .fvm/flutter_sdk
  useRootAsPackage: true
  categories:
    app:
      - "apps/*"
      - "."
    packages:
      - "packages/**"
  scripts:

    pg:
      run: fvm dart run melos exec -- fvm dart pub get --no-example

    po:
      run: fvm dart run melos exec -- fvm dart pub outdated

    pu:
      run: fvm dart run melos exec -- fvm dart pub upgrade --major-versions

    l10n:
      run: fvm dart run melos exec -- fvm flutter gen-l10n

    br: # build_runner
      run: fvm dart run melos exec -- fvm dart run build_runner build

    brd: # build_runner
      run: fvm dart run melos exec -- fvm dart run build_runner build -d

    fm:
      run: fvm dart run melos exec -- fvm dart format .

    fm-check:
      run: find lib -name "*.dart" ! -name "*.g.dart" ! -name "*.freezed.dart" -exec fvm dart format --set-exit-if-changed {} +

    icon:
      run: fvm dart run melos exec -- fvm dart run flutter_launcher_icons

    fix:
      run: fvm dart run melos exec -- fvm dart fix --apply

    test:
      run: fvm dart run melos exec -- fvm flutter test
      select-packages:
        - '.'

    test:coverage:
      run: fvm dart run melos exec -- fvm flutter test --coverage
      select-packages:
        - '.'

    test:watch:
      run: fvm dart run melos exec -- fvm flutter test --watch
      select-packages:
        - '.'

    aos:devapk:
      run: fvm dart run melos exec -- fvm flutter build apk --release --flavor dev --dart-define-from-file=./configs/dev.json

    aos:stgapk:
      run: fvm dart run melos exec -- fvm flutter build apk --release --flavor stg --dart-define-from-file=./configs/stg.json

    aos:betaapk:
      run: fvm dart run melos exec -- fvm flutter build apk --release --flavor beta --dart-define-from-file=./configs/beta.json

    aos:dev:
      run: fvm dart run melos exec -- fvm flutter build appbundle --release --flavor dev --dart-define-from-file=./configs/dev.json

    aos:stg:
      run: fvm dart run melos exec -- fvm flutter build appbundle --release --flavor stg --dart-define-from-file=./configs/stg.json

    aos:beta:
      run: fvm dart run melos exec -- fvm flutter build appbundle --release --flavor beta --dart-define-from-file=./configs/beta.json

    ios:dev:
      run: fvm dart run melos exec -- fvm flutter build ipa --release --flavor dev --dart-define-from-file=./configs/dev.json

    ios:stg:
      run: fvm dart run melos exec -- fvm flutter build ipa --release --flavor stg --dart-define-from-file=./configs/stg.json

    ios:beta:
      run: fvm dart run melos exec -- fvm flutter build ipa --release --flavor beta --dart-define-from-file=./configs/beta.json
      